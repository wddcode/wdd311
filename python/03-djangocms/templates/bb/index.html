{% load mustache %}
{% load straight_include %}

<!doctype html>
<html lang="en">
  <head>
    <title>Django + Backbone.js</title>

    <link rel="stylesheet" 
          href="http://yui.yahooapis.com/3.2.0/build/cssreset/reset-min.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}css/style.css">

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
    <script src="{{ STATIC_URL }}js/lib/underscore-min.js"></script>
    <script src="{{ STATIC_URL }}js/lib/backbone-min.js"></script>
    <script src="{{ STATIC_URL }}js/lib/backbone-tastypie.js"></script>
    <script src="{{ STATIC_URL }}js/lib/ICanHaz.min.js"></script>
    <script>
      // TWEET_API = "/wdd/api/v1/entries/";
      TWEET_API = "{% url api_dispatch_list api_name="v1" resource_name="entries" %}";
      {% if data %}
      app = {loaded: true};
      {% endif %}
    </script>
    <script src="{{ STATIC_URL }}js/app.js"></script>

    <script type="text/html" id="tweetTemplate">
      {% straight_include "bb/tweetTemplate.mustache" %}
    </script>

    <script type="text/html" id="listApp">
      {% straight_include "bb/listApp.mustache" %}
    </script>

    <script type="text/html" id="detailApp">
      {% straight_include "bb/detailApp.mustache" %}
    </script>
  </head>

  <body>
    <div id="app">
      {% if data %}
      {% mustache "detailApp" data %}
      {% endif %}
    </div>
  </body>
</html>
